{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["const store = {\n  _state: 0,\n  max: Infinity,\n  min: 0,\n  _listeners: [],\n  set listeners(fn) {\n    this._listeners.push(fn);\n  },\n  get current() {\n    return this._state;\n  },\n  set current(n) {\n    if (n <= this.max && n >= this.min) {\n      this._state = n;\n      this.dispatch();\n    }\n  },\n  dispatch() {\n    this._listeners.forEach(fn => fn(this._state));\n  }\n};\n\nconst increment = (state) => state + 1;\nconst decrement = (state) => state - 1;\n\n// Polyfill for Array.from which isn't being transpiled by babel\nif (!Array.from) {\n    Array.from = function (object) {\n        'use strict';\n        return [].slice.call(object);\n    };\n}\n\nwindow.App = {\n  run(initial, listener) {\n    if (typeof initial === 'function') {\n      initial();\n    }\n\n    if (typeof listener === 'function') {\n      store.listeners = listener;\n    }\n\n    store.dispatch();\n  },\n  next() {\n    store.current = increment(store.current);\n    return store.current;\n  },\n  previous() {\n    store.current = decrement(store.current);\n    return store.current;\n  },\n  current() {\n    return store.current;\n  },\n  navigateTo(index) {\n    store.current = index;\n    return store.current;\n  }\n};\n\nconst scroll = (steps) => `translate(-${steps * 100}vw, 0)`;\nconst ACTIVE_CLASS = 'in';\nconst NAV_CLASS = 'current';\n\nconst navigatePanes = ($container, $panes, state) => {\n  $container.style.WebkitTransform = scroll(state);\n  $panes[state].classList.add(ACTIVE_CLASS);\n};\n\nconst renderNav = (pages) => {\n  const navs = document.querySelectorAll('.nav-dots');\n  Array.from(navs).forEach(nav => {\n    const frag = document.createDocumentFragment();\n\n    for(let i = 0; i < pages; i++) {\n      let a = document.createElement('a');\n      a.classList.add('dot');\n      a.setAttribute('data-nav', i);\n      frag.appendChild(a);\n    }\n\n    nav.appendChild(frag);\n  });\n};\n\nconst updateNav = (state) => {\n  const navs = document.querySelectorAll('.nav-dots');\n\n  const clearAll = (nav) => {\n    Array.from(nav.children).forEach(a => a.classList.remove(NAV_CLASS));\n    return nav;\n  }\n\n  Array.from(navs)\n    .map(clearAll)\n    .forEach(nav => {\n      const curr = nav.children.item(state);\n      curr && curr.classList.add(NAV_CLASS);\n    });\n};\n\nconst init = () => {\n  const $container = document.querySelector('.scroller');\n  const $panes = document.querySelectorAll('.pane');\n\n  const resetAllPanes = () => {\n    Array.from($panes).forEach(pane => pane.classList.remove(ACTIVE_CLASS))\n  };\n\n  window.App.run(() => {\n    store.max = document.querySelectorAll('.pane').length;\n    renderNav(store.max);\n  }, (state) => {\n    resetAllPanes();\n    navigatePanes($container, $panes, state);\n    updateNav(state);\n  });\n\n  const onNavigate = (evt, method) => {\n    evt.preventDefault();\n    window.App[method]();\n  };\n\n  const navigateTo = (evt, index) => {\n    evt.preventDefault();\n    window.App.navigateTo(index);\n  };\n\n  document.addEventListener('click', (evt) => {\n    const method = evt.target.getAttribute('data-app');\n    const navDot = evt.target.getAttribute('data-nav');\n\n    if (method) {\n      onNavigate(evt, method);\n    }\n\n    if (navDot) {\n      navigateTo(evt, parseInt(navDot));\n    }\n\n  }, false);\n};\n\ndocument.addEventListener('DOMContentLoaded', init, false);\n"],"sourceRoot":"/source/"}